(this["webpackJsonpclass-32-solution-todo"]=this["webpackJsonpclass-32-solution-todo"]||[]).push([[0],{251:function(e,t){},261:function(e,t){},263:function(e,t){},278:function(e,t){},280:function(e,t){},308:function(e,t){},310:function(e,t){},311:function(e,t){},316:function(e,t){},318:function(e,t){},324:function(e,t){},326:function(e,t){},345:function(e,t){},357:function(e,t){},360:function(e,t){},398:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var c=n(41),a=n(42),r=n(45),s=n(44),i=n(0),o=n.n(i),l=n(14),u=n.n(l),j=n(11),d=n.n(j),b=n(18),p=n(9),O=n(24),h=n.n(O),m=n(172),f=n.n(m),x=n(21),v=n.n(x),g=n(173),y=n.n(g),N=n(1),k=o.a.createContext(),w="https://dimaalabsiauth-api.herokuapp.com";function C(e){var t=Object(i.useState)(!1),n=Object(p.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)({}),s=Object(p.a)(r,2),o=s[0],l=s[1],u=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(w,"/signin")).set("authorization","Basic ".concat(f.a.encode("".concat(t,":").concat(n))));case 3:c=e.sent,console.log(c.body),O(c.body.token),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(d.a.mark((function e(t,n,c){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={username:t,password:n,role:c},e.next=4,h.a.post("".concat(w,"/signup"),a);case 4:r=e.sent,console.log(r.body),O(r.body.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,c){return e.apply(this,arguments)}}();function O(e){if(e){var t=y.a.decode(e);m(!0,t),v.a.save("token",e)}else m(!1,{})}Object(i.useEffect)((function(){var e=v.a.load("token");console.log("myTokenCookie: ",e),console.log("initial render here !!"),O(e)}),[]);var m=function(e,t){a(e),l(t)},x={loggedIn:c,login:u,logout:function(){a(!1),l({}),v.a.remove("token")},user:o,signUp:j};return Object(N.jsx)(k.Provider,{value:x,children:e.children})}var S=o.a.createContext();var I=function(e){var t=Object(i.useState)(!1),n=Object(p.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)(2),s=Object(p.a)(r,2),o=s[0],l=s[1],u=Object(i.useState)("do"),j=Object(p.a)(u,2),d=j[0],b=j[1],O={display:c,numOfItems:o,defaultSort:d,setDisplay:a,setNumOfItems:l,setDefaultSort:b};return Object(i.useEffect)((function(){var e=localStorage.getItem("SettingForm"),t=JSON.parse(e);t&&l(Number(t.numberOfItem)),localStorage.clear()}),[]),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(S.Provider,{value:O,children:e.children})})};var D=function(){var e=Object(i.useContext)(k);return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("nav",{className:"bp3-navbar .modifier bp3-dark",children:[Object(N.jsx)("div",{className:"bp3-navbar-group bp3-align-left",children:Object(N.jsx)("div",{className:"bp3-navbar-heading",children:"TO-DO"})}),Object(N.jsx)("div",{className:"bp3-navbar-group bp3-align-right",children:Object(N.jsx)("button",{className:"bp3-button bp3-minimal bp3-icon-log-out",onClick:e.logout,children:"log out"})})]})})},T=n(22),F=n(95),B=function(e){var t=Object(i.useState)({}),n=Object(p.a)(t,2),c=n[0],a=n[1];return{handleChange:function(e){e.persist(),a((function(t){return Object(F.a)(Object(F.a)({},t),{},Object(T.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(c)},values:c}},P=n(404),A=n(174),L=n.n(A),U=n(27),z=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.context.loggedIn,t=!this.props.capability||this.context.can(this.props.capability),n=e&&t;return Object(N.jsx)(U.d,{condition:n,children:this.props.children})}}]),n}(o.a.Component);z.contextType=k;var q=z;var E=function(e){var t=Object(i.useContext)(S),n=Object(i.useState)(0),c=Object(p.a)(n,2),a=c[0],r=c[1],s=t.numOfItems,o=a*s,l=e.list.slice(o,o+s).map((function(t){return Object(N.jsxs)("div",{style:{width:"650px",margin:"15px"},children:[Object(N.jsx)("p",{children:t.text}),Object(N.jsx)("p",{children:Object(N.jsxs)("small",{children:["Assigned to: ",t.assignee]})}),Object(N.jsx)("p",{children:Object(N.jsxs)("small",{children:["Difficulty: ",t.difficulty]})}),Object(N.jsxs)(q,{capability:"update",children:[Object(N.jsx)(P.a,{onClick:function(){return e.toggleComplete(t.id)},children:"true"===t.complete.toString()?Object(N.jsx)("div",{style:{background:"green"},children:"Completed"}):Object(N.jsx)("div",{style:{background:"pink"},children:"Pending"})}),"        "]}),Object(N.jsxs)(q,{capability:"delete",children:[" ",Object(N.jsx)(P.a,{style:{background:"#008075"},intent:"danger",onClick:function(){return e.deleteItem(t.id)},children:"Delete"})]})]},t.id)})),u=Math.ceil(e.list.length/s);return Object(N.jsxs)(N.Fragment,{children:[l,Object(N.jsx)(L.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:u,onPageChange:function(e){var t=e.selected;r(t)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"})]})},J=n(28);var W=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"toDo",children:Object(N.jsx)(P.b,{interactive:!0,elevation:J.a.TWO,children:Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){localStorage.setItem("SettingForm",JSON.stringify(e))}({display:e.target.disply.value,numberOfItem:e.target.numberOfItem.value}),e.target.reset(),window.location.href="/"},children:[Object(N.jsx)("h2",{children:"Choose Setting"}),Object(N.jsx)(P.c,{label:"show completed tasks",labelFor:"disply",children:Object(N.jsxs)("select",{name:"disply",dir:"auto",className:"bp3-input .modifier",children:[Object(N.jsx)("option",{value:!0,children:"true"}),Object(N.jsx)("option",{value:!1,children:"false"})]})}),Object(N.jsx)(P.c,{label:"numberOfItem per page ",labelFor:"assignee",children:Object(N.jsx)("input",{className:"bp3-input .modifier",name:"numberOfItem",type:"text",placeholder:"numberOfItem per page",dir:"auto"})}),Object(N.jsx)("br",{}),Object(N.jsx)(P.a,{type:"submit",style:{background:"#008075"},children:"Try \u2734\ufe0f"})]})})})})},G=function(e){var t,n,c=Object(i.useState)([]),a=Object(p.a)(c,2),r=a[0],s=(a[1],Object(i.useState)([])),o=Object(p.a)(s,2),l=o[0],u=(o[1],B((function(e){return f.apply(this,arguments)}))),j=u.handleChange,O=u.handleSubmit,m="https://dimaalabsiauth-api.herokuapp.com";function f(){return(f=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.load("token"),e.next=3,h.a.post("".concat(m,"/todo"),t).set("authorization","Bearer ".concat(n));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.load("token"),e.next=3,h.a.delete("".concat(m,"/todo?index=").concat(t)).set("authorization","Bearer ".concat(n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(b.a)(d.a.mark((function t(n){var c,a,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=v.a.load("token"),t.next=3,e.list.map((function(e,t){if(n===t)return"complete"===e.complete?e.complete="pending":e.complete="complete",e}));case 3:return a=t.sent,r={toDo:a[n].toDo,assignee:a[n].assignee,difficulty:a[n].difficulty,complete:a[n].complete},t.next=7,h.a.put("".concat(m,"/todo?index=").concat(n),r).set("authorization","Bearer ".concat(c));case 7:s=t.sent,e.setList(s.body.todo);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)(Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.a.load("token"),t.next=3,h.a.get("".concat(m,"/todo")).set("authorization","Bearer ".concat(n));case 3:c=t.sent,e.setList(c.body.todo);case 5:case"end":return t.stop()}}),t)}))),[e.list]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(P.b,{interactive:!0,elevation:J.a.TWO,children:Object(N.jsxs)("div",{className:"mainsec",children:[Object(N.jsxs)("h1",{children:["To Do List  (",l,")"]}),Object(N.jsxs)("div",{className:"mainCards",children:[Object(N.jsxs)("form",{onSubmit:O,children:[Object(N.jsx)("h2",{children:"Add To Do Item"}),Object(N.jsxs)("label",{children:[Object(N.jsx)("span",{children:"To Do Item"}),Object(N.jsx)("input",(t={onChange:j,name:"text",type:"text",placeholder:"Item Details",class:"bp3-input .modifier"},Object(T.a)(t,"type","text"),Object(T.a)(t,"dir","auto"),t))]}),Object(N.jsxs)("label",{children:[Object(N.jsx)("span",{children:"Assigned To"}),Object(N.jsx)("input",(n={class:"bp3-input .modifier",type:"text",onChange:j,name:"assignee"},Object(T.a)(n,"type","text"),Object(T.a)(n,"placeholder","Assignee Name"),Object(T.a)(n,"dir","auto"),n))]}),Object(N.jsxs)("label",{children:[Object(N.jsx)("span",{children:"Difficulty"}),Object(N.jsx)("input",{onChange:j,defaultValue:3,type:"range",min:1,max:5,name:"difficulty",dir:"auto"})]}),Object(N.jsx)("label",{children:Object(N.jsx)(P.a,{"data-testid":"button-test",type:"submit",rightIcon:"arrow-right",intent:"success",text:"Add Item"})})]}),Object(N.jsx)(E,{list:r,toggleComplete:function(e){return g.apply(this,arguments)},deleteItem:function(e){return x.apply(this,arguments)}})]})]})}),Object(N.jsx)(W,{})]})},H=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{className:"bp3-navbar bp3-dark",id:"footer",children:Object(N.jsx)("p",{children:" \xa9 Dima Alabsi 2021 "})})}}]),n}(i.Component),M=H;n(398);var V=function(){var e=Object(i.useContext)(k),t=Object(i.useState)(""),n=Object(p.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)(""),s=Object(p.a)(r,2),o=s[0],l=s[1],u=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.login(c,o);case 3:window.location.href="/";case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(U.d,{condition:!e.loggedIn,children:Object(N.jsxs)("div",{children:[Object(N.jsx)("header",{children:Object(N.jsxs)("nav",{className:"bp3-navbar .modifier bp3-dark",children:[Object(N.jsx)("div",{className:"bp3-navbar-group bp3-align-left",children:Object(N.jsx)("div",{className:"bp3-navbar-heading",children:"TO-DO"})}),Object(N.jsx)("div",{className:"bp3-navbar-group bp3-align-right"})]})}),Object(N.jsx)("section",{className:"ftco-section",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsx)("div",{className:"row justify-content-center",children:Object(N.jsx)("div",{className:"col-md-6 col-lg-5",children:Object(N.jsxs)("div",{className:"login-wrap p-4 p-md-5",children:[Object(N.jsx)("div",{className:"icon d-flex align-items-center justify-content-center",children:Object(N.jsx)("span",{className:"fa fa-user-o",children:"S-IN"})}),Object(N.jsx)("h3",{className:"text-center mb-4",children:"Have an account?"}),Object(N.jsxs)("form",{onSubmit:u,children:[Object(N.jsx)("div",{className:"form-group",children:Object(N.jsx)("input",{onChange:function(e){a(e.target.value)},type:"text",className:"form-control rounded-left",placeholder:"Username",required:!0})}),Object(N.jsx)("div",{className:"form-group d-flex",children:Object(N.jsx)("input",{onChange:function(e){l(e.target.value)},type:"password",className:"form-control rounded-left",placeholder:"Password",required:!0})}),Object(N.jsx)("br",{}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("button",{type:"submit",className:"btn btn-primary rounded submit p-3 px-5",children:"Get Started"}),Object(N.jsx)("button",{className:"btn btn-primary rounded submit p-3 px-5",style:{margin:"0 0 0 190px"},onClick:function(){window.location.href="/signup"},children:"Sign-Up"})]})]})]})})})})})]})})})};var K=function(){var e=Object(i.useContext)(k),t=Object(i.useState)(""),n=Object(p.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)(""),s=Object(p.a)(r,2),o=s[0],l=s[1],u=Object(i.useState)("user"),j=Object(p.a)(u,2),O=j[0],h=j[1],m=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.signUp(c,o,O);case 3:window.location.href="/";case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)("div",{children:[Object(N.jsx)("header",{children:Object(N.jsxs)("nav",{className:"bp3-navbar .modifier bp3-dark",children:[Object(N.jsx)("div",{className:"bp3-navbar-group bp3-align-left",children:Object(N.jsx)("div",{className:"bp3-navbar-heading",children:"TO-DO"})}),Object(N.jsx)("div",{className:"bp3-navbar-group bp3-align-right"})]})}),Object(N.jsx)("section",{className:"ftco-section",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsx)("div",{className:"row justify-content-center",children:Object(N.jsx)("div",{className:"col-md-6 col-lg-5",children:Object(N.jsxs)("div",{className:"login-wrap p-4 p-md-5",children:[Object(N.jsx)("div",{className:"icon d-flex align-items-center justify-content-center",children:Object(N.jsx)("span",{className:"fa fa-user-o",children:"S-UP"})}),Object(N.jsxs)("form",{onSubmit:m,children:[Object(N.jsx)("div",{className:"form-group",children:Object(N.jsx)("input",{onChange:function(e){a(e.target.value)},type:"text",className:"form-control rounded-left",placeholder:"Username",required:!0})}),Object(N.jsx)("div",{className:"form-group d-flex",children:Object(N.jsx)("input",{onChange:function(e){l(e.target.value)},type:"password",className:"form-control rounded-left",placeholder:"Password",required:!0})}),Object(N.jsx)("div",{className:"form-group d-flex",children:Object(N.jsxs)("select",{className:"form-control rounded-left",onChange:function(e){h(e.target.value)},children:[Object(N.jsx)("option",{value:"user",children:"user"}),Object(N.jsx)("option",{value:"admin",children:"admin"})]})}),Object(N.jsx)("br",{}),Object(N.jsxs)("p",{children:["already have account  ",Object(N.jsx)("a",{href:"/",children:" login"})]}),Object(N.jsx)("div",{className:"form-group",children:Object(N.jsx)("button",{type:"submit",className:"btn btn-primary rounded submit p-3 px-5",style:{margin:"0 0 0 75px"},children:"confirm & login"})})]})]})})})})})]})};function Q(e){var t=Object(i.useContext)(k);return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(U.b,{condition:1==t.loggedIn,children:[console.log(t),Object(N.jsx)(U.c,{children:Object(N.jsxs)(I,{children:[Object(N.jsx)(D,{}),Object(N.jsx)(G,{}),Object(N.jsx)(M,{}),Object(N.jsx)(I,{})]})}),Object(N.jsxs)(U.a,{children:[Object(N.jsx)(V,{}),Object(N.jsx)(K,{})]})]})})}var R=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(N.jsx)(C,{children:Object(N.jsx)(Q,{})})}}]),n}(o.a.Component),X=document.getElementById("root");u.a.render(Object(N.jsx)(R,{}),X)}},[[399,1,2]]]);
//# sourceMappingURL=main.276daa0c.chunk.js.map